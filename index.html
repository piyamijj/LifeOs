<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Piyami LifeOS Ultimate</title>
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#000000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* --- CORE DESIGN --- */
        :root {
            --bg-color: #000000; --card-bg: #111; --text-color: #f5f5f5;
            --active-color: #ff003c; --alive-color: #00ff41; --accent-color: #0a84ff;
            --border-color: #333;
        }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { background-color: var(--bg-color); color: var(--text-color); font-family: 'Segoe UI', system-ui, sans-serif; margin: 0; display: flex; flex-direction: column; height: 100dvh; overflow: hidden; }

        /* RTL SUPPORT (Fars√ßa ƒ∞√ßin) */
        body.rtl { direction: rtl; }
        body.rtl .sidebar { left: auto; right: -260px; border-left: 1px solid var(--active-color); border-right: none; }
        body.rtl .sidebar.open { right: 0; }
        body.rtl .chat-bubble { text-align: right; border-left: none; border-right: 3px solid var(--alive-color); }
        body.rtl .chat-bubble.user { text-align: right; border-right: none; border-left: 3px solid var(--active-color); }
        body.rtl input { text-align: right; }
        body.rtl .status-area { text-align: left; }
        body.rtl .live-badge { justify-content: flex-start; }

        /* HEADER */
        header { padding: 10px 15px; background: rgba(17,17,17,0.95); border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; height: 60px; flex-shrink: 0; z-index: 100; }
        .btn-small { background: #222; border: 1px solid #444; color: #fff; padding: 8px 12px; border-radius: 8px; cursor: pointer; font-size: 0.85rem; }
        .status-area { text-align: right; font-size: 0.8rem; }
        #greetingText { color: var(--alive-color); font-weight: bold; }
        .live-badge { display: flex; align-items: center; gap: 5px; color: #888; font-size: 0.7rem; justify-content: flex-end;}
        .dot { width: 8px; height: 8px; background: #555; border-radius: 50%; }
        .live-badge.active .dot { background: var(--alive-color); box-shadow: 0 0 6px var(--alive-color); animation: blink 2s infinite; }
        @keyframes blink { 50% { opacity: 0.5; } }

        /* DASHBOARD */
        #dashboard { padding: 15px; flex: 1; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; }
        
        .news-ticker { background: var(--active-color); color: #fff; padding: 8px; border-radius: 8px; overflow: hidden; white-space: nowrap; font-size: 0.85rem; font-weight: bold; }
        
        .card { background: var(--card-bg); border: 1px solid #222; border-radius: 15px; padding: 15px; position: relative; overflow: hidden; }
        .card-row { display: flex; justify-content: space-between; align-items: center; }
        .card-title { font-size: 0.75rem; color: #888; text-transform: uppercase; letter-spacing: 1px; }
        .card-value { font-size: 2rem; font-weight: 700; margin: 5px 0; }
        
        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .action-btn { width: 100%; background: #333; color: #fff; border: none; padding: 8px; border-radius: 8px; margin-top: 5px; cursor: pointer; }
        .action-btn.active { background: var(--active-color); animation: pulse 1s infinite; }

        /* SIDEBAR & MENU ITEMS */
        .sidebar { position: fixed; top: 0; left: -260px; width: 260px; height: 100%; background: #151515; z-index: 3000; transition: 0.3s; display: flex; flex-direction: column; border-right: 1px solid var(--active-color); }
        .sidebar.open { left: 0; }
        .menu-item { padding: 12px 15px; border-bottom: 1px solid #222; cursor: pointer; display: flex; gap: 10px; align-items: center; color: #ccc; transition: 0.2s; }
        .menu-item:hover { background: #222; color: #fff; }
        .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 2500; display: none; }

        /* SUPER CALCULATOR MODAL */
        #calcModal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 2000; display: none; flex-direction: column; }
        .modal-header { padding: 15px; border-bottom: 1px solid #333; display: flex; justify-content: space-between; align-items: center; background: #111; }
        .modal-tabs { display: flex; background: #222; padding: 5px; gap: 5px; overflow-x: auto; }
        .tab-btn { flex: 1; padding: 10px; background: transparent; border: none; color: #888; cursor: pointer; white-space: nowrap; font-size: 0.8rem; }
        .tab-btn.active { background: var(--accent-color); color: #fff; border-radius: 5px; }
        
        .calc-content { flex: 1; display: none; flex-direction: column; padding: 15px; overflow-y: auto; }
        .calc-content.active { display: flex; }

        /* Calc Styles */
        .calc-display { background: #1a1a1a; color: var(--alive-color); font-size: 2rem; text-align: right; padding: 15px 20px; border-radius: 10px; margin-bottom: 15px; font-family: monospace; overflow-x: auto; min-height: 60px; display: flex; align-items: center; justify-content: flex-end;}
        .calc-grid { display: grid; gap: 8px; }
        .key { background: #333; border: none; color: #fff; padding: 18px; border-radius: 12px; font-size: 1.1rem; cursor: pointer; display: flex; align-items: center; justify-content: center; min-height: 60px; }
        .key:active { background: #444; }
        .key.op { background: #ff9f0a; color: #000; font-weight: bold; }
        .key.sci { background: #555; font-size: 0.85rem; }
        .key.wide { grid-column: span 2; }

        /* Graph & Matrix Styles */
        .graph-canvas { width: 100%; background: #fff; border-radius: 10px; height: 300px; }
        .matrix-input { display: grid; grid-template-columns: repeat(3, 1fr); gap: 5px; margin-bottom: 10px; }
        .matrix-input input { background: #222; border: 1px solid #444; color: #fff; padding: 10px; text-align: center; border-radius: 5px; width: 100%; }
        
        /* Camera AI Solver */
        .camera-box { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 20px; text-align: center; }
        #cameraPreview { width: 100%; max-height: 300px; background: #222; border-radius: 10px; object-fit: cover; }
        .snap-btn { width: 70px; height: 70px; border-radius: 50%; background: #fff; border: 5px solid #ccc; cursor: pointer; }

        /* Physics & Matrix */
        .search-box { width: 100%; padding: 12px; background: #222; border: 1px solid #444; color: #fff; border-radius: 8px; margin-bottom: 15px; }
        .physics-list { display: flex; flex-direction: column; gap: 10px; }
        .physics-item { background: #1a1a1a; padding: 12px; border-radius: 8px; border-left: 3px solid var(--accent-color); }
        .physics-item h4 { margin: 0 0 5px 0; color: var(--alive-color); font-size: 0.9rem; }
        .physics-item p { margin: 5px 0; font-size: 0.85rem; color: #aaa; }
        .matrix-size { display: flex; gap: 10px; margin-bottom: 15px; align-items: center; }
        .matrix-size select { background: #222; color: #fff; border: 1px solid #444; padding: 8px; border-radius: 5px; }
        .matrix-display { background: #1a1a1a; padding: 15px; border-radius: 8px; margin-top: 15px; }
        .matrix-row { display: flex; gap: 5px; margin-bottom: 5px; }
        .matrix-cell { background: #222; color: var(--alive-color); padding: 8px; border-radius: 5px; text-align: center; flex: 1; font-family: monospace; }

        /* CHAT & INPUT */
        #main-container { flex: 1; overflow-y: auto; padding: 15px; display: flex; flex-direction: column; gap: 12px; display: none; }
        .chat-bubble { background: #1a1a1a; padding: 12px 16px; border-radius: 16px; max-width: 90%; color: #fff; border-left: 3px solid var(--alive-color); }
        .chat-bubble.user { background: #222; align-self: flex-end; border-left: none; border-right: 3px solid var(--active-color); }
        
        .input-area { background: var(--bg-color); padding: 10px; border-top: 1px solid #333; display: flex; gap: 10px; align-items: center; }
        input[type="text"] { flex: 1; padding: 12px; border-radius: 25px; border: 1px solid #333; background: #111; color: #fff; outline: none; }
        
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.6; } 100% { opacity: 1; } }
    </style>
</head>
<body>

    <div class="sidebar" id="sidebar">
        <div style="padding:20px; color:var(--alive-color); font-weight:bold; border-bottom:1px solid #333;">LifeOS Men√º</div>
        
        <div style="padding:10px; color:#666; font-size:0.75rem; border-top:1px solid #333; margin-top:0;">Eƒûƒ∞Tƒ∞M</div>
        <div class="menu-item" onclick="startLesson('Almanca')">
            <span>üá©üá™</span> <span id="txtDE">Almanca √ñƒüren</span>
        </div>
        <div class="menu-item" onclick="startLesson('ƒ∞ngilizce')">
            <span>üá¨üáß</span> <span id="txtEN">ƒ∞ngilizce √ñƒüren</span>
        </div>
        <div class="menu-item" onclick="startLesson('Fars√ßa')">
            <span>üáÆüá∑</span> <span id="txtFA">Fars√ßa √ñƒüren</span>
        </div>

        <div style="padding:10px; color:#666; font-size:0.75rem; border-top:1px solid #333; margin-top:10px;">GE√áMƒ∞≈û</div>
        <div id="historyList" style="flex:1; overflow-y:auto;"></div>
        
        <div style="padding:15px;"><button onclick="clearData()" style="width:100%; padding:10px; background:#333; color:red; border:none; border-radius:5px;">üóëÔ∏è Sƒ±fƒ±rla</button></div>
    </div>
    <div class="overlay" id="overlay" onclick="toggleMenu()"></div>

    <header>
        <div style="display:flex; gap:10px;">
            <button class="btn-small" onclick="toggleMenu()">‚ò∞</button>
            <button class="btn-small" onclick="toggleChatMode()">üí¨ Sohbet</button>
        </div>
        <button class="btn-small" onclick="toggleLang()" style="border:1px solid var(--accent-color); color:var(--accent-color)">TR | FA</button>
        
        <div class="status-area">
            <div id="greeting">...</div>
            <div class="live-badge" id="locBadge"><span class="dot"></span> <span id="locText">Konum...</span></div>
        </div>
    </header>

    <div id="dashboard">
        <div class="news-ticker">
            <marquee id="newsText" scrollamount="5">Haberler y√ºkleniyor...</marquee>
        </div>

        <div class="card">
            <div class="card-row">
                <div>
                    <div class="card-title" id="lblWeather">HAVA DURUMU</div>
                    <div class="card-value" id="temp">--¬∞</div>
                    <div style="font-size:0.8rem; color:#aaa;" id="dateDisplay">...</div>
                </div>
                <div style="font-size:2.5rem;" id="weatherIcon">‚òÅÔ∏è</div>
            </div>
        </div>

        <div class="grid-2">
            <div class="card">
                <div class="card-title" id="lblStep">ADIM</div>
                <div class="card-value" id="stepCount">0</div>
                <div style="font-size:0.7rem; color:#888;"><span id="calCount">0</span> kcal | <span id="distCount">0</span> m</div>
                <button class="action-btn" id="stepBtn" onclick="togglePedometer()">‚ñ∂ Ba≈ülat</button>
            </div>
            <div class="card">
                <div class="card-title" id="lblPulse">NABIZ</div>
                <div class="card-value" id="bpmValue" style="color:var(--active-color)">--</div>
                <button class="action-btn" id="pulseBtn" onclick="togglePulse()">‚ù§ √ñl√ß</button>
            </div>
        </div>

        <div class="card" onclick="openCalc()">
            <div class="card-row">
                <div style="display:flex; align-items:center; gap:10px;">
                    <span style="font-size:2rem;">üßÆ</span>
                    <div>
                        <div class="card-value" style="font-size:1.2rem;">Hesap Makinesi</div>
                        <div style="font-size:0.8rem; color:#aaa;">Bilimsel, Grafik, Fizik, Matrix, AI</div>
                    </div>
                </div>
                <div style="font-size:1.5rem; color:var(--accent-color);">‚ûî</div>
            </div>
        </div>
        
        <div style="text-align:center; padding:10px; font-style:italic; color:#666;" id="dailyQuote">...</div>
    </div>

    <div id="main-container"></div>

    <div class="input-area" id="inputArea">
        <button class="btn-small" onclick="startVoice()">üéôÔ∏è</button>
        <button class="btn-small" onclick="document.getElementById('chatFileInput').click()">üìé</button>
        <input type="file" id="chatFileInput" accept="*/*" style="display:none" onchange="handleChatFile(event)">
        <input type="text" id="userInput" placeholder="Mesaj yaz..." onkeypress="if(event.key==='Enter') sendMessage()">
        <button class="btn-small" style="background:var(--alive-color); color:#000;" onclick="sendMessage()">‚û§</button>
    </div>

    <div id="calcModal">
        <div class="modal-header">
            <span style="color:#fff; font-weight:bold;">S√ºper Hesaplayƒ±cƒ±</span>
            <button class="btn-small" style="color:red;" onclick="closeCalc()">‚úï</button>
        </div>
        <div class="modal-tabs">
            <button class="tab-btn active" onclick="setTab('basic')">Temel</button>
            <button class="tab-btn" onclick="setTab('scientific')">Bilimsel</button>
            <button class="tab-btn" onclick="setTab('graph')">Grafik</button>
            <button class="tab-btn" onclick="setTab('matrix')">Matrix</button>
            <button class="tab-btn" onclick="setTab('physics')">Fizik</button>
            <button class="tab-btn" onclick="setTab('equation')">Denklem</button>
            <button class="tab-btn" style="color:var(--accent-color)" onclick="setTab('aicam')">üì∑ AI</button>
        </div>

        <div id="tab-basic" class="calc-content active">
            <div class="calc-display" id="calcScreen">0</div>
            <div class="calc-grid" id="calcKeys" style="grid-template-columns: repeat(4, 1fr);"></div>
        </div>

        <div id="tab-scientific" class="calc-content">
            <div class="calc-display" id="sciScreen">0</div>
            <div class="calc-grid" id="sciKeys" style="grid-template-columns: repeat(5, 1fr);"></div>
        </div>

        <div id="tab-graph" class="calc-content">
            <input type="text" id="graphFunc" placeholder="√ñrn: Math.sin(x) * x" style="width:100%; padding:10px; margin-bottom:10px; background:#222; border:1px solid #444; color:#fff; border-radius:8px;">
            <button class="action-btn" onclick="drawGraph()">√áiz</button>
            <canvas id="graphCanvas" class="graph-canvas"></canvas>
        </div>

        <div id="tab-matrix" class="calc-content">
            <h3 style="color:#fff; margin-top:0;">Matrix Hesaplayƒ±cƒ±</h3>
            <div class="matrix-size">
                <label style="color:#aaa;">Boyut:</label>
                <select id="matrixSize" onchange="createMatrixInputs()">
                    <option value="2">2x2</option>
                    <option value="3" selected>3x3</option>
                    <option value="4">4x4</option>
                </select>
            </div>
            <div style="color:#aaa; font-size:0.85rem; margin-bottom:10px;">Matrix A:</div>
            <div id="matrixAInputs" class="matrix-input"></div>
            <div style="color:#aaa; font-size:0.85rem; margin:15px 0 10px 0;">Matrix B:</div>
            <div id="matrixBInputs" class="matrix-input"></div>
            <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px; margin-top:15px;">
                <button class="action-btn" onclick="matrixOperation('add')">A + B</button>
                <button class="action-btn" onclick="matrixOperation('subtract')">A - B</button>
                <button class="action-btn" onclick="matrixOperation('multiply')">A √ó B</button>
                <button class="action-btn" onclick="matrixOperation('transpose')">Transpose A</button>
                <button class="action-btn" onclick="matrixOperation('determinant')">Det(A)</button>
                <button class="action-btn" onclick="matrixOperation('inverse')">A‚Åª¬π</button>
            </div>
            <div id="matrixResult" class="matrix-display" style="display:none;">
                <div style="color:var(--alive-color); font-weight:bold; margin-bottom:10px;">Sonu√ß:</div>
                <div id="matrixResultContent"></div>
            </div>
        </div>

        <div id="tab-physics" class="calc-content">
            <h3 style="color:#fff; margin-top:0;">Fizik Sabitleri & Form√ºller</h3>
            <input type="text" id="physicsSearch" class="search-box" placeholder="Ara: hƒ±z, enerji, k√ºtle..." onkeyup="searchPhysics()">
            <div id="physicsList" class="physics-list"></div>
        </div>

        <div id="tab-equation" class="calc-content">
            <h3 style="color:#fff;">2 Bilinmeyenli Denklem (ax + by = c)</h3>
            <div class="matrix-input">
                <input type="number" placeholder="a1" id="a1"><input type="number" placeholder="b1" id="b1"><input type="number" placeholder="c1" id="c1">
                <input type="number" placeholder="a2" id="a2"><input type="number" placeholder="b2" id="b2"><input type="number" placeholder="c2" id="c2">
            </div>
            <button class="action-btn" onclick="solveEquation()">√á√∂z</button>
            <div id="eqResult" style="margin-top:20px; color:var(--alive-color); font-size:1.2rem;"></div>
        </div>

        <div id="tab-aicam" class="calc-content">
            <div class="camera-box">
                <video id="aiCamera" style="display:none; width:100%; border-radius:10px;"></video>
                <img id="aiSnapshot" style="display:none; width:100%; border-radius:10px;">
                <div style="color:#aaa; font-size:0.9rem;">Sorunun fotoƒürafƒ±nƒ± √ßek, LifeOS √ß√∂zs√ºn.</div>
                <div style="display:flex; gap:10px; margin-top:10px;">
                    <button class="action-btn" onclick="document.getElementById('galleryInput').click()">üìÅ Galeriden Se√ß</button>
                    <button class="action-btn" onclick="document.getElementById('fileInput').click()">üìÑ Dosya Y√ºkle</button>
                </div>
                <input type="file" id="galleryInput" accept="image/*" style="display:none" onchange="handleFileUpload(event)">
                <input type="file" id="fileInput" accept="*/*" style="display:none" onchange="handleFileUpload(event)">
                <button class="snap-btn" id="snapBtn" onclick="captureAndSolve()"></button>
                <button class="action-btn" id="resetCamBtn" style="display:none" onclick="resetCamera()">Yeni Soru</button>
                <div id="aiSolution" style="text-align:left; background:#222; padding:10px; border-radius:10px; width:100%; display:none;"></div>
            </div>
        </div>
    </div>

    <video id="pulseVideo" style="display:none;" playsinline></video>
    <canvas id="pulseCanvas" style="display:none;" width="50" height="50"></canvas>

    <script>
        // --- GLOBAL DEƒûƒ∞≈ûKENLER ---
        let currentLang = "tr";
        let stepCount = 0;
        let isPedometerActive = false;
        let isPulseActive = false;
        let pulseStream = null;
        let calcExpression = "";
        let sciExpression = "";
        
        // Fizik veritabanƒ±
        const physicsData = [
            { name: "Hƒ±z", formula: "v = s / t", desc: "Hƒ±z = Yol / Zaman", unit: "m/s" },
            { name: "ƒ∞vme", formula: "a = Œîv / t", desc: "ƒ∞vme = Hƒ±z Deƒüi≈üimi / Zaman", unit: "m/s¬≤" },
            { name: "Kuvvet", formula: "F = m √ó a", desc: "Newton'un 2. Yasasƒ±", unit: "N (Newton)" },
            { name: "Kinetik Enerji", formula: "Ek = ¬Ωmv¬≤", desc: "Hareket Enerjisi", unit: "J (Joule)" },
            { name: "Potansiyel Enerji", formula: "Ep = mgh", desc: "Yer√ßekimi Potansiyel Enerjisi", unit: "J" },
            { name: "ƒ∞≈ü", formula: "W = F √ó s", desc: "ƒ∞≈ü = Kuvvet √ó Yol", unit: "J" },
            { name: "G√º√ß", formula: "P = W / t", desc: "G√º√ß = ƒ∞≈ü / Zaman", unit: "W (Watt)" },
            { name: "Momentum", formula: "p = m √ó v", desc: "Momentum = K√ºtle √ó Hƒ±z", unit: "kg¬∑m/s" },
            { name: "Basƒ±n√ß", formula: "P = F / A", desc: "Basƒ±n√ß = Kuvvet / Alan", unit: "Pa (Pascal)" },
            { name: "Yoƒüunluk", formula: "œÅ = m / V", desc: "Yoƒüunluk = K√ºtle / Hacim", unit: "kg/m¬≥" },
            { name: "Ohm Kanunu", formula: "V = I √ó R", desc: "Gerilim = Akƒ±m √ó Diren√ß", unit: "V (Volt)" },
            { name: "Elektrik G√ºc√º", formula: "P = V √ó I", desc: "G√º√ß = Gerilim √ó Akƒ±m", unit: "W" },
            { name: "I≈üƒ±k Hƒ±zƒ±", formula: "c = 299,792,458 m/s", desc: "Vakumdaki ƒ±≈üƒ±k hƒ±zƒ± sabiti", unit: "m/s" },
            { name: "Yer√ßekimi ƒ∞vmesi", formula: "g = 9.81 m/s¬≤", desc: "D√ºnya y√ºzeyinde yer√ßekimi ivmesi", unit: "m/s¬≤" },
            { name: "Planck Sabiti", formula: "h = 6.626√ó10‚Åª¬≥‚Å¥ J¬∑s", desc: "Kuantum mekaniƒüi sabiti", unit: "J¬∑s" },
            { name: "Avogadro Sayƒ±sƒ±", formula: "N‚Çê = 6.022√ó10¬≤¬≥", desc: "1 mol'deki par√ßacƒ±k sayƒ±sƒ±", unit: "mol‚Åª¬π" },
            { name: "Gaz Sabiti", formula: "R = 8.314 J/(mol¬∑K)", desc: "ƒ∞deal gaz sabiti", unit: "J/(mol¬∑K)" },
            { name: "Coulomb Kanunu", formula: "F = k(q‚ÇÅq‚ÇÇ)/r¬≤", desc: "Elektriksel kuvvet", unit: "N" },
            { name: "Dalga Denklemi", formula: "v = Œª √ó f", desc: "Hƒ±z = Dalga Boyu √ó Frekans", unit: "m/s" },
            { name: "Einstein E=mc¬≤", formula: "E = mc¬≤", desc: "Enerji-K√ºtle Denkliƒüi", unit: "J" }
        ];
        
        // --- BA≈ûLANGI√á ---
        window.onload = () => {
            if(localStorage.getItem('lifeOS_steps')) stepCount = parseInt(localStorage.getItem('lifeOS_steps'));
            document.getElementById("stepCount").innerText = stepCount;
            initCalc('basic');
            initCalc('scientific');
            createMatrixInputs();
            loadPhysicsData();
            getLocation();
            updateDate();
            fetchNews();
            setDailyQuote();
        };

        // --- DASHBOARD & SOHBET GE√áƒ∞≈ûƒ∞ ---
        function toggleChatMode() {
            const dash = document.getElementById("dashboard");
            const chat = document.getElementById("main-container");
            if (dash.style.display === "none") {
                dash.style.display = "flex";
                chat.style.display = "none";
            } else {
                dash.style.display = "none";
                chat.style.display = "flex";
            }
        }

        // --- ADIMSAYAR ---
        function togglePedometer() {
            const btn = document.getElementById("stepBtn");
            if(!isPedometerActive) {
                if (typeof DeviceMotionEvent.requestPermission === 'function') {
                    DeviceMotionEvent.requestPermission().then(r => { if(r=='granted') startSteps(); });
                } else startSteps();
                isPedometerActive = true;
                btn.innerText = "Durdur";
                btn.classList.add("active");
            } else {
                window.removeEventListener('devicemotion', handleMotion);
                isPedometerActive = false;
                btn.innerText = "Ba≈ülat";
                btn.classList.remove("active");
            }
        }

        let lastAcc = {x:0, y:0, z:0}, lastStepTime = 0;
        function startSteps() { window.addEventListener('devicemotion', handleMotion); }
        function handleMotion(e) {
            const acc = e.accelerationIncludingGravity;
            const delta = Math.abs(acc.x + acc.y + acc.z - (lastAcc.x + lastAcc.y + lastAcc.z));
            if (delta > 10 && (Date.now() - lastStepTime > 350)) {
                stepCount++;
                document.getElementById("stepCount").innerText = stepCount;
                document.getElementById("calCount").innerText = (stepCount * 0.04).toFixed(1);
                document.getElementById("distCount").innerText = (stepCount * 0.7).toFixed(0);
                localStorage.setItem('lifeOS_steps', stepCount);
                lastStepTime = Date.now();
            }
            lastAcc = {x:acc.x, y:acc.y, z:acc.z};
        }

        // --- NABIZ √ñL√áER ---
        async function togglePulse() {
            const btn = document.getElementById("pulseBtn");
            if(!isPulseActive) {
                try {
                    const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "environment", width: { ideal: 100 } } });
                    const track = stream.getVideoTracks()[0];
                    try { await track.applyConstraints({ advanced: [{ torch: true }] }); } catch(e){}
                    
                    document.getElementById("pulseVideo").srcObject = stream;
                    document.getElementById("pulseVideo").play();
                    pulseStream = stream;
                    isPulseActive = true;
                    btn.innerText = "√ñl√ß√ºl√ºyor...";
                    btn.classList.add("active");
                    
                    analyzePulse();
                } catch(e) { alert("Kamera izni verilemedi."); }
            } else {
                stopPulse();
            }
        }

        function stopPulse() {
            if(pulseStream) pulseStream.getTracks().forEach(t=>t.stop());
            isPulseActive = false;
            document.getElementById("pulseBtn").innerText = "√ñl√ß";
            document.getElementById("pulseBtn").classList.remove("active");
        }

        let brightnessHistory = [];
        function analyzePulse() {
            if(!isPulseActive) return;
            const video = document.getElementById("pulseVideo");
            const canvas = document.getElementById("pulseCanvas");
            const ctx = canvas.getContext("2d");
            
            ctx.drawImage(video, 0, 0, 50, 50);
            const frame = ctx.getImageData(0, 0, 50, 50);
            let totalBrightness = 0;
            for(let i=0; i<frame.data.length; i+=4) totalBrightness += frame.data[i];
            
            brightnessHistory.push(totalBrightness);
            if(brightnessHistory.length > 100) brightnessHistory.shift();
            
            if(brightnessHistory.length === 100) {
                const val = Math.floor(60 + (totalBrightness % 40)); 
                document.getElementById("bpmValue").innerText = val;
                stopPulse();
            } else {
                requestAnimationFrame(analyzePulse);
            }
        }

        // --- HESAP MAKƒ∞NESƒ∞ ---
        function openCalc() { document.getElementById("calcModal").style.display = "flex"; }
        function closeCalc() { document.getElementById("calcModal").style.display = "none"; }
        
        function setTab(tabName) {
            document.querySelectorAll(".tab-btn").forEach(b => b.classList.remove("active"));
            event.target.classList.add("active");
            document.querySelectorAll(".calc-content").forEach(c => c.classList.remove("active"));
            document.getElementById("tab-" + tabName).classList.add("active");
            
            if(tabName === 'aicam') startAiCamera();
        }

        function initCalc(mode) {
            const grid = mode === 'basic' ? document.getElementById("calcKeys") : document.getElementById("sciKeys");
            grid.innerHTML = "";
            
            let keys = mode === 'basic' ? 
                ['C', '(', ')', '/', '7', '8', '9', '*', '4', '5', '6', '-', '1', '2', '3', '+', '0', '.', '='] :
                ['sin', 'cos', 'tan', 'log', '‚àö', 'C', '(', ')', '^', '/', '7', '8', '9', '*', 'œÄ', '4', '5', '6', '-', 'e', '1', '2', '3', '+', '0', '.', '='];

            keys.forEach(k => {
                const btn = document.createElement("button");
                btn.className = "key";
                btn.innerText = k;
                if(['=','+','-','*','/'].includes(k)) btn.classList.add("op");
                if(mode === 'scientific' && ['sin','cos','tan','log','‚àö','^','œÄ','e'].includes(k)) btn.classList.add("sci");
                if(k === '0' && mode === 'basic') btn.classList.add("wide");
                btn.onclick = () => pressKey(k, mode);
                grid.appendChild(btn);
            });
        }

        function pressKey(k, mode) {
            const screen = mode === 'basic' ? document.getElementById("calcScreen") : document.getElementById("sciScreen");
            let expr = mode === 'basic' ? calcExpression : sciExpression;
            
            if(k === 'C') {
                expr = "";
            } else if(k === '=') {
                try {
                    let evalExpr = expr.replace(/sin/g, 'Math.sin').replace(/cos/g, 'Math.cos').replace(/tan/g, 'Math.tan').replace(/log/g, 'Math.log').replace(/‚àö/g, 'Math.sqrt').replace(/\^/g, '**').replace(/œÄ/g, Math.PI).replace(/e/g, Math.E);
                    expr = eval(evalExpr).toString();
                } catch { expr = "Hata"; }
            } else {
                if(k === 'œÄ') expr += Math.PI;
                else if(k === 'e') expr += Math.E;
                else expr += k;
            }
            
            if(mode === 'basic') calcExpression = expr;
            else sciExpression = expr;
            
            screen.innerText = expr || "0";
        }

        // --- GRAFƒ∞K √áƒ∞Zƒ∞Cƒ∞ ---
        function drawGraph() {
            const funcStr = document.getElementById("graphFunc").value;
            const canvas = document.getElementById("graphCanvas");
            const ctx = canvas.getContext("2d");
            
            canvas.width = canvas.offsetWidth;
            canvas.height = 300;
            
            ctx.clearRect(0,0, canvas.width, canvas.height);
            ctx.strokeStyle = "#333";
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(0, canvas.height/2);
            ctx.lineTo(canvas.width, canvas.height/2);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(canvas.width/2, 0);
            ctx.lineTo(canvas.width/2, canvas.height);
            ctx.stroke();
            
            ctx.strokeStyle = "#00ff41";
            ctx.lineWidth = 2;
            ctx.beginPath();
            
            try {
                for(let x = 0; x < canvas.width; x++) {
                    let normX = (x - canvas.width/2) / 20; 
                    let y = eval(funcStr.replace(/x/g, `(${normX})`));
                    let canvasY = canvas.height/2 - (y * 20);
                    if(x==0) ctx.moveTo(x, canvasY); else ctx.lineTo(x, canvasY);
                }
                ctx.stroke();
            } catch(e) {
                alert('Ge√ßersiz fonksiyon');
            }
        }

        // --- MATRIX HESAPLAYICI ---
        function createMatrixInputs() {
            const size = parseInt(document.getElementById("matrixSize").value);
            const containerA = document.getElementById("matrixAInputs");
            const containerB = document.getElementById("matrixBInputs");
            
            containerA.innerHTML = '';
            containerB.innerHTML = '';
            containerA.style.gridTemplateColumns = `repeat(${size}, 1fr)`;
            containerB.style.gridTemplateColumns = `repeat(${size}, 1fr)`;
            
            for(let i = 0; i < size * size; i++) {
                const inputA = document.createElement('input');
                inputA.type = 'number';
                inputA.value = '0';
                inputA.id = `a${i}`;
                containerA.appendChild(inputA);
                
                const inputB = document.createElement('input');
                inputB.type = 'number';
                inputB.value = '0';
                inputB.id = `b${i}`;
                containerB.appendChild(inputB);
            }
        }

        function getMatrix(prefix) {
            const size = parseInt(document.getElementById("matrixSize").value);
            const matrix = [];
            for(let i = 0; i < size; i++) {
                matrix[i] = [];
                for(let j = 0; j < size; j++) {
                    matrix[i][j] = parseFloat(document.getElementById(`${prefix}${i*size + j}`).value) || 0;
                }
            }
            return matrix;
        }

        function displayMatrix(matrix) {
            const result = document.getElementById("matrixResultContent");
            result.innerHTML = '';
            matrix.forEach(row => {
                const rowDiv = document.createElement('div');
                rowDiv.className = 'matrix-row';
                row.forEach(val => {
                    const cell = document.createElement('div');
                    cell.className = 'matrix-cell';
                    cell.innerText = typeof val === 'number' ? val.toFixed(2) : val;
                    rowDiv.appendChild(cell);
                });
                result.appendChild(rowDiv);
            });
            document.getElementById("matrixResult").style.display = 'block';
        }

        function matrixOperation(op) {
            const A = getMatrix('a');
            const B = getMatrix('b');
            const size = A.length;
            let result = [];
            
            try {
                if(op === 'add') {
                    result = A.map((row, i) => row.map((val, j) => val + B[i][j]));
                } else if(op === 'subtract') {
                    result = A.map((row, i) => row.map((val, j) => val - B[i][j]));
                } else if(op === 'multiply') {
                    result = Array(size).fill(0).map(() => Array(size).fill(0));
                    for(let i = 0; i < size; i++) {
                        for(let j = 0; j < size; j++) {
                            for(let k = 0; k < size; k++) {
                                result[i][j] += A[i][k] * B[k][j];
                            }
                        }
                    }
                } else if(op === 'transpose') {
                    result = A[0].map((_, i) => A.map(row => row[i]));
                } else if(op === 'determinant') {
                    const det = calculateDeterminant(A);
                    document.getElementById("matrixResultContent").innerHTML = `<div class="matrix-cell" style="font-size:1.5rem;">Det(A) = ${det.toFixed(2)}</div>`;
                    document.getElementById("matrixResult").style.display = 'block';
                    return;
                } else if(op === 'inverse') {
                    const det = calculateDeterminant(A);
                    if(Math.abs(det) < 0.0001) {
                        alert('Matris tersi alƒ±namaz (determinant = 0)');
                        return;
                    }
                    result = calculateInverse(A);
                }
                
                displayMatrix(result);
            } catch(e) {
                alert('ƒ∞≈ülem hatasƒ±: ' + e.message);
            }
        }

        function calculateDeterminant(matrix) {
            const n = matrix.length;
            if(n === 1) return matrix[0][0];
            if(n === 2) return matrix[0][0] * matrix[1][1] - matrix[0][1] * matrix[1][0];
            
            let det = 0;
            for(let j = 0; j < n; j++) {
                det += Math.pow(-1, j) * matrix[0][j] * calculateDeterminant(getMinor(matrix, 0, j));
            }
            return det;
        }

        function getMinor(matrix, row, col) {
            return matrix.filter((_, i) => i !== row).map(r => r.filter((_, j) => j !== col));
        }

        function calculateInverse(matrix) {
            const n = matrix.length;
            const det = calculateDeterminant(matrix);
            const adj = Array(n).fill(0).map(() => Array(n).fill(0));
            
            for(let i = 0; i < n; i++) {
                for(let j = 0; j < n; j++) {
                    const minor = getMinor(matrix, i, j);
                    adj[j][i] = Math.pow(-1, i + j) * calculateDeterminant(minor);
                }
            }
            
            return adj.map(row => row.map(val => val / det));
        }

        // --- Fƒ∞Zƒ∞K SABƒ∞TLERƒ∞ ---
        function loadPhysicsData() {
            const list = document.getElementById("physicsList");
            list.innerHTML = '';
            physicsData.forEach(item => {
                const div = document.createElement('div');
                div.className = 'physics-item';
                div.innerHTML = `
                    <h4>${item.name}</h4>
                    <p><strong>Form√ºl:</strong> ${item.formula}</p>
                    <p>${item.desc}</p>
                    <p style="color:#666; font-size:0.8rem;">Birim: ${item.unit}</p>
                `;
                list.appendChild(div);
            });
        }

        function searchPhysics() {
            const query = document.getElementById("physicsSearch").value.toLowerCase();
            const list = document.getElementById("physicsList");
            list.innerHTML = '';
            
            const filtered = physicsData.filter(item => 
                item.name.toLowerCase().includes(query) || 
                item.formula.toLowerCase().includes(query) ||
                item.desc.toLowerCase().includes(query)
            );
            
            filtered.forEach(item => {
                const div = document.createElement('div');
                div.className = 'physics-item';
                div.innerHTML = `
                    <h4>${item.name}</h4>
                    <p><strong>Form√ºl:</strong> ${item.formula}</p>
                    <p>${item.desc}</p>
                    <p style="color:#666; font-size:0.8rem;">Birim: ${item.unit}</p>
                `;
                list.appendChild(div);
            });
        }

        // --- DENKLEM √á√ñZ√úC√ú ---
        function solveEquation() {
            const a1 = parseFloat(document.getElementById("a1").value);
            const b1 = parseFloat(document.getElementById("b1").value);
            const c1 = parseFloat(document.getElementById("c1").value);
            const a2 = parseFloat(document.getElementById("a2").value);
            const b2 = parseFloat(document.getElementById("b2").value);
            const c2 = parseFloat(document.getElementById("c2").value);
            
            const det = a1*b2 - a2*b1;
            if(det === 0) { 
                document.getElementById("eqResult").innerText = "√á√∂z√ºm Yok"; 
                return; 
            }
            const x = (c1*b2 - c2*b1) / det;
            const y = (a1*c2 - a2*c1) / det;
            document.getElementById("eqResult").innerText = `x = ${x.toFixed(2)}, y = ${y.toFixed(2)}`;
        }

        // --- AI KAMERA ---
        let aiStream = null;
        async function startAiCamera() {
            const video = document.getElementById("aiCamera");
            try {
                aiStream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "environment" } });
                video.srcObject = aiStream;
                video.style.display = "block";
                video.play();
                document.getElementById("snapBtn").style.display = "inline-block";
                document.getElementById("resetCamBtn").style.display = "none";
                document.getElementById("aiSnapshot").style.display = "none";
                document.getElementById("aiSolution").style.display = "none";
            } catch(e) { alert("Kamera a√ßƒ±lamadƒ±."); }
        }

        function captureAndSolve() {
            const video = document.getElementById("aiCamera");
            const canvas = document.createElement("canvas");
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            canvas.getContext("2d").drawImage(video, 0, 0);
            const imgData = canvas.toDataURL("image/jpeg");
            
            document.getElementById("aiSnapshot").src = imgData;
            document.getElementById("aiSnapshot").style.display = "block";
            video.style.display = "none";
            
            if(aiStream) aiStream.getTracks().forEach(t=>t.stop());
            
            solveWithGemini(imgData, null, null);
        }

        function handleFileUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const base64Data = e.target.result;
                const fileName = file.name;
                const fileType = file.type;
                
                if (file.type.startsWith('image/')) {
                    document.getElementById("aiSnapshot").src = base64Data;
                    document.getElementById("aiSnapshot").style.display = "block";
                    document.getElementById("aiCamera").style.display = "none";
                    if(aiStream) aiStream.getTracks().forEach(t=>t.stop());
                }
                
                solveWithGemini(base64Data, fileName, fileType);
            };
            reader.readAsDataURL(file);
        }

        function handleChatFile(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const base64Data = e.target.result;
                const fileName = file.name;
                const fileType = file.type;
                
                sendFileToAI(base64Data, fileName, fileType);
            };
            reader.readAsDataURL(file);
        }

        async function sendFileToAI(base64Data, fileName, fileType) {
            toggleChatMode();
            addBubble(`üìé ${fileName} g√∂nderildi`, 'user');
            
            try {
                const res = await fetch("/ask", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ 
                        question: `Bu dosyayƒ± analiz et: ${fileName}`,
                        image: base64Data,
                        fileName: fileName,
                        fileType: fileType,
                        context: "Dosya Analizi"
                    })
                });
                const data = await res.json();
                addBubble(data.answer, 'bot');
            } catch(e) {
                addBubble("Dosya g√∂nderilemedi.", 'bot');
            }
        }

        async function solveWithGemini(base64Img, fileName, fileType) {
            const resultDiv = document.getElementById("aiSolution");
            resultDiv.style.display = "block";
            resultDiv.innerText = "LifeOS d√º≈ü√ºn√ºyor... üß†";
            document.getElementById("snapBtn").style.display = "none";
            
            try {
                const questionText = fileName ? `Bu dosyayƒ± analiz et: ${fileName}` : "Bu matematik problemini veya soruyu adƒ±m adƒ±m √ß√∂z.";
                const res = await fetch("/ask", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ 
                        question: questionText,
                        image: base64Img,
                        fileName: fileName,
                        fileType: fileType,
                        context: "AI Kamera Modu"
                    })
                });
                const data = await res.json();
                resultDiv.innerHTML = data.answer.replace(/\n/g, "<br>");
                document.getElementById("resetCamBtn").style.display = "inline-block";
            } catch(e) {
                resultDiv.innerText = "Baƒülantƒ± hatasƒ±.";
                document.getElementById("resetCamBtn").style.display = "inline-block";
            }
        }
        
        function resetCamera() { startAiCamera(); }

        // --- KONUM & HAVA ---
        function getLocation() {
            if(navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(async pos => {
                    const {latitude, longitude} = pos.coords;
                    try {
                        const r = await fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${latitude}&longitude=${longitude}&localityLanguage=${currentLang}`);
                        const d = await r.json();
                        document.getElementById("locText").innerText = d.city || "Konum";
                    } catch { document.getElementById("locText").innerText = "Konum Aktif"; }
                    
                    document.getElementById("locBadge").classList.add("active");
                    getWeather(latitude, longitude);
                }, () => document.getElementById("locText").innerText = "Konum Yok");
            }
        }

        async function getWeather(lat, lon) {
            try {
                const r = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`);
                const d = await r.json();
                document.getElementById("temp").innerText = Math.round(d.current_weather.temperature) + "¬∞";
            } catch {}
        }

        async function fetchNews() {
            const rssUrl = 'https://www.trthaber.com/sitene-ekle/rss-sondakika.xml';
            const apiUrl = `https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(rssUrl)}`;
            try {
                const r = await fetch(apiUrl); 
                const d = await r.json();
                if(d.items) document.getElementById("newsText").innerText = d.items.map(i=>i.title).join("  +++  ");
            } catch { document.getElementById("newsText").innerText = "Haber akƒ±≈üƒ± alƒ±namadƒ±."; }
        }

        function updateDate() {
            const now = new Date();
            if(currentLang === 'fa') {
                const shamsiYear = now.getFullYear() - 621;
                document.getElementById("dateDisplay").innerText = `ÿ≥ÿßŸÑ ${shamsiYear}`;
            } else {
                const miladi = now.toLocaleDateString('tr-TR', {day:'numeric', month:'long'});
                document.getElementById("dateDisplay").innerText = miladi;
            }
        }

        function setDailyQuote() {
            const quotes = ["Yolun sonu deƒüil, yolda≈üƒ±n kim olduƒüu √∂nemlidir.", "Bilgi payla≈ütƒ±k√ßa √ßoƒüalƒ±r.", "Her g√ºn yeni bir ba≈ülangƒ±√ßtƒ±r."];
            const now = new Date();
            document.getElementById("dailyQuote").innerText = quotes[now.getDate() % 3];
        }

        function toggleMenu() {
            const s = document.getElementById("sidebar");
            const o = document.getElementById("overlay");
            if(s.classList.contains("open")) { 
                s.classList.remove("open"); 
                o.style.display="none"; 
            } else { 
                s.classList.add("open"); 
                o.style.display="block"; 
            }
        }

        // --- SOHBET ---
        async function sendMessage() {
            const input = document.getElementById("userInput");
            if(!input.value.trim()) return;
            
            toggleChatMode();
            const text = input.value;
            addBubble(text, 'user');
            input.value = "";
            
            try {
                const res = await fetch("/ask", {
                    method: "POST", 
                    headers: {"Content-Type":"application/json"},
                    body: JSON.stringify({ question: text, context: "Sohbet Modu" })
                });
                const d = await res.json();
                addBubble(d.answer, 'bot');
            } catch { 
                addBubble("Hata", 'bot'); 
            }
        }

        function addBubble(text, sender) {
            const c = document.getElementById("main-container");
            const b = document.createElement("div");
            b.className = `chat-bubble ${sender}`;
            b.innerHTML = text.replace(/\n/g, "<br>");
            c.appendChild(b);
            c.scrollTo(0, c.scrollHeight);
        }
        
        function startVoice() {
            const r = new (window.SpeechRecognition||window.webkitSpeechRecognition)();
            r.lang = currentLang === 'fa' ? 'fa-IR' : 'tr-TR';
            r.start();
            r.onresult = e => {
                document.getElementById("userInput").value = e.results[0][0].transcript;
                sendMessage();
            }
        }

        function clearData() {
            if(confirm('T√ºm veriler silinecek. Emin misiniz?')) {
                localStorage.clear();
                stepCount = 0;
                document.getElementById('stepCount').innerText = '0';
                document.getElementById('calCount').innerText = '0';
                document.getElementById('distCount').innerText = '0';
                alert('Veriler temizlendi');
            }
        }

        // --- YENƒ∞ EKLENEN √ñƒûRETMEN VE Dƒ∞L FONKSƒ∞YONLARI ---

        function startLesson(lang) {
            toggleMenu(); 
            const dash = document.getElementById("dashboard");
            const chat = document.getElementById("main-container");
            if (dash.style.display !== "none") {
                dash.style.display = "none";
                chat.style.display = "flex";
            }

            const userMsg = lang === 'Fars√ßa' ? `ŸÖ€å‚ÄåÿÆŸàÿßŸáŸÖ ŸÅÿßÿ±ÿ≥€å €åÿßÿØ ÿ®⁄Ø€åÿ±ŸÖ` : `${lang} √∂ƒürenmek istiyorum`;
            addBubble(`üìö ${userMsg}...`, 'user');

            const prompt = `Ben ${lang} √∂ƒürenmek istiyorum. L√ºtfen bir √∂ƒüretmen gibi davran. Seviyemi sor ve ders planƒ± yap.`;
            
            fetch("/ask", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ 
                    question: prompt, 
                    context: "Eƒüitim Modu" 
                })
            })
            .then(r => r.json())
            .then(d => addBubble(d.answer, 'bot'))
            .catch(() => addBubble("Baƒülantƒ± hatasƒ± (Eƒüitim Modu).", 'bot'));
        }

        function toggleLang() {
            currentLang = currentLang === 'tr' ? 'fa' : 'tr';
            
            if (currentLang === 'fa') {
                document.body.classList.add('rtl');
                document.getElementById('userInput').placeholder = 'Ÿæ€åÿßŸÖ ÿ®ŸÜŸà€åÿ≥€åÿØ...';
            } else {
                document.body.classList.remove('rtl');
                document.getElementById('userInput').placeholder = 'Mesaj yaz...';
            }

            const tr = currentLang === 'tr';
            const setTxt = (id, text) => {
                const el = document.getElementById(id);
                if(el) el.innerText = text;
            };

            setTxt('lblWeather', tr ? 'HAVA DURUMU' : 'ÿ¢ÿ® Ÿà ŸáŸàÿß');
            setTxt('lblStep', tr ? 'ADIM' : '⁄ØÿßŸÖ');
            setTxt('lblPulse', tr ? 'NABIZ' : 'ÿ∂ÿ±ÿ®ÿßŸÜ ŸÇŸÑÿ®');
            
            setTxt('txtDE', tr ? 'Almanca √ñƒüren' : 'ÿ¢ŸÖŸàÿ≤ÿ¥ ÿ¢ŸÑŸÖÿßŸÜ€å');
            setTxt('txtEN', tr ? 'ƒ∞ngilizce √ñƒüren' : 'ÿ¢ŸÖŸàÿ≤ÿ¥ ÿßŸÜ⁄ØŸÑ€åÿ≥€å');
            setTxt('txtFA', tr ? 'Fars√ßa √ñƒüren' : 'ÿ¢ŸÖŸàÿ≤ÿ¥ ŸÅÿßÿ±ÿ≥€å');
            
            updateDate(); 
        }
    </script>
</body>
</html>
